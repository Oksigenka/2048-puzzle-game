const e=new class{constructor(e){this.score=0,this.scoreVal=document.querySelector(".game-score"),this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.arr=this.field.map(e=>[...e])}shiftLeft(){let e=-1;for(let t=0;t<4;t++){e=-1;for(let i=0;i<4;i++)0===this.field[t][i]&&-1===e?e=i:0!==this.field[t][i]&&-1!==e&&(this.field[t][e]=this.field[t][i],this.field[t][i]=0,e++)}}moveLeft(){this.shiftLeft();for(let e=0;e<4;e++)for(let t=0;t<3;t++)if(0!==this.field[e][t]&&this.field[e][t]===this.field[e][t+1]){let i=2*this.field[e][t];this.field[e][t]=i,this.field[e][t+1]=0,this.score+=i,this.getScore()}this.shiftLeft()}shiftRight(){let e=-1;for(let t=0;t<4;t++){e=-1;for(let i=3;i>=0;i--)0===this.field[t][i]&&-1===e?e=i:0!==this.field[t][i]&&-1!==e&&(this.field[t][e]=this.field[t][i],this.field[t][i]=0,e--)}}moveRight(){this.shiftRight();for(let e=0;e<4;e++)for(let t=3;t>=0;t--)if(0!==this.field[e][t]&&this.field[e][t]===this.field[e][t-1]){let i=2*this.field[e][t];this.field[e][t]=i,this.field[e][t-1]=0,this.score+=i,this.getScore()}this.shiftRight()}shiftUp(){for(let e=0;e<4;e++){let t=-1;for(let i=0;i<4;i++)0===this.field[i][e]&&-1===t?t=i:0!==this.field[i][e]&&-1!==t&&i!==t&&(this.field[t][e]=this.field[i][e],this.field[i][e]=0,t++)}}moveUp(){this.shiftUp();for(let e=0;e<4;e++)for(let t=0;t<3;t++)if(0!==this.field[t][e]&&this.field[t][e]===this.field[t+1][e]){let i=2*this.field[t][e];this.field[t][e]=i,this.field[t+1][e]=0,this.score+=i}this.shiftUp()}shiftDown(){let e=-1;for(let t=0;t<4;t++){e=-1;for(let i=3;i>=0;i--)0===this.field[i][t]&&-1===e?e=i:0!==this.field[i][t]&&-1!==e&&(this.field[e][t]=this.field[i][t],this.field[i][t]=0,e--)}}moveDown(){this.shiftDown();for(let e=0;e<4;e++)for(let t=3;t>0;t--)if(0!==this.field[t][e]&&this.field[t][e]===this.field[t-1][e]){let i=2*this.field[t][e];this.field[t][e]=i,this.field[t-1][e]=0,this.score+=i,this.getScore()}this.shiftDown()}getScore(){return this.scoreVal.textContent=this.score,this.score}getState(){return this.field}getStatus(){let e=!0;for(let t=0;t<4;t++)for(let i=0;i<4;i++)0!==this.field[t][i]&&(e=!1);return e?"idle":this.winerGame()?"win":this.canMove()?"playing":"lose"}start(){this.generateCell()}restart(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)this.field[e][t]=0;this.generateCell(),this.generateCell(),this.score=0,this.getScore()}generateCell(){let e=[];for(let t=0;t<4;t++)for(let i=0;i<4;i++)0===this.field[t][i]&&e.push({x:t,y:i});if(e.length>0){let{x:t,y:i}=e[Math.floor(Math.random()*e.length)];0===this.field[t][i]&&(this.field[t][i]=.9>Math.random()?2:4)}}canMove(){let e=!1;for(let t=0;t<4;t++){for(let i=0;i<3;i++)0===this.field[i][t]&&(e=!0),0!==this.field[i][t]&&(this.field[i][t]===this.field[i+1][t]||this.field[t][i]===this.field[t][i+1])&&(e=!0);for(let i=3;i>0;i--)0===this.field[i][t]&&(e=!0),0!==this.field[i][t]&&(this.field[i][t]===this.field[i-1][t]||this.field[t][i]===this.field[t][i-1])&&(e=!0)}return e}winerGame(){let e=!1;for(let t=0;t<4;t++)for(let i=0;i<4;i++)2048===this.field[t][i]&&(e=!0);return e}isMoveMade(e){return e!==JSON.stringify(this.field)}},t=document.querySelector(".message-lose"),i=document.querySelector(".message-win"),s=document.querySelector(".message-start"),l=document.querySelector(".game-field"),r=document.querySelector(".start");function f(t){let i=JSON.stringify(e.getState());switch(t.key){case"ArrowDown":e.moveDown();break;case"ArrowUp":e.moveUp();break;case"ArrowLeft":e.moveLeft();break;case"ArrowRight":e.moveRight();break;default:return}e.isMoveMade(i)&&e.generateCell(),e.getStatus(),e.getScore(),o(),e.scoreVal.textContent=e.score}function o(){for(let t=0;t<4;t++)for(let i=0;i<4;i++)0===e.field[t][i]?l.rows[t].cells[i].textContent="":l.rows[t].cells[i].textContent=e.field[t][i];document.querySelectorAll(".field-cell").forEach(e=>{let t=parseInt(e.textContent,10);e.className="field-cell",t>0&&e.classList.add(`field-cell--${t}`)}),e.canMove()||(t.style.display="block"),e.winerGame()&&(i.style.display="block")}r.addEventListener("click",()=>{"Start"===r.textContent?(e.start(),e.start(),r.textContent="Restart",r.style.fontSize="17px",r.addEventListener("mouseenter",()=>{r.style.backgroundColor="#f87474"}),r.addEventListener("mouseleave",()=>{r.style.backgroundColor="#f1b2b2"}),s.style.display="none",r.classList.remove("start"),r.classList.add("restart"),r.textContent="Restart"):"Restart"===r.textContent&&(e.restart(),e.restart(),i.style.display="none",t.style.display="none",o()),document.addEventListener("keydown",f),o()});
//# sourceMappingURL=index.22281a40.js.map
